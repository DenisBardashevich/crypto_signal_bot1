# Конфигурация для crypto_signal_bot (оптимизирована для 15-минутного таймфрейма 2025)
# Цель: 10+ надёжных сигналов в сутки с высокой точностью

# --- Таймфреймы ---
TIMEFRAME        = '15m'     # основной ТФ для сигналов (15 минут)
BACKUP_TIMEFRAME = '1h'      # 1ч для подтверждения тренда

# --- EMA периоды (оптимизированы для баланса скорость/надёжность) ---
MA_FAST = 9     # 9 периодов (2.25 часа) - чуть быстрее для большего количества сигналов
MA_SLOW = 21    # 21 период (5.25 часов) - проверенная настройка

# --- Лимиты данных ---
LIMIT = 400     # ~4 дня истории на 15м (достаточно для всех индикаторов)

# --- RSI (оптимизирован для 15м скальпинга 2025) ---
RSI_WINDOW = 9   # 9 периодов - более чувствительный для большего количества сигналов
RSI_OVERSOLD = 25    # 25 вместо 30 - немного смягчено для частоты
RSI_OVERBOUGHT = 75  # 75 вместо 70 - немного смягчено для частоты

# --- ATR (оптимизировано для 15м) ---
ATR_WINDOW = 14  # стандартный период
TRAIL_ATR_MULT = 1.5   # множитель для трейлинга

# --- Bollinger Bands (критически важно для 2025) ---
BB_WINDOW = 20          # стандартный период
BB_STD_DEV = 2.0        # стандартные отклонения
BB_SQUEEZE_THRESHOLD = 0.12  # немного увеличено для захвата больше сигналов

# --- MACD (быстрые настройки для 15м) ---
MACD_FAST = 8       # ускорено с 12 до 8
MACD_SLOW = 21      # ускорено с 26 до 21  
MACD_SIGNAL = 7     # ускорено с 9 до 7

# --- VWAP (критически важно для 15м) ---
USE_VWAP = True     # включить VWAP анализ
VWAP_DEVIATION_THRESHOLD = 0.008  # увеличено до 0.8% для большего количества сигналов

# --- Объём (сбалансированная фильтрация) ---
MIN_VOLUME_USDT = 400_000  # снижено с 500k до 400k для большего количества пар

# --- Частота сигналов (оптимизировано для 10+ в сутки) ---
SIGNAL_COOLDOWN_MINUTES = 12  # снижено с 15 до 12 минут

# --- Telegram ---
TELEGRAM_TOKEN = '8046529777:AAHV4BfC_cPz7AptR8k6MOKxGQA6FVMm6oM'
TELEGRAM_CHAT_ID = 931346988

# --- Take Profit (агрессивнее для частых сигналов) ---
TP_MIN = 0.012   # снижено с 1.5% до 1.2%
TP_MAX = 0.08    # снижено с 10% до 8%
TP_ATR_MULT = 1.8  # снижено с 2.0 до 1.8

# --- Stop Loss (тайтер для лучшего R:R) ---
SL_MIN = 0.006   # снижено с 0.8% до 0.6%
SL_MAX = 0.035   # снижено с 4% до 3.5%
SL_ATR_MULT = 0.9  # снижено с 1.0 до 0.9

# --- Минимальное расстояние между TP и SL ---
MIN_TP_SL_DISTANCE = 0.004 # снижено до 0.4%

# --- Fee Rate ---
FEE_RATE = 0.0006  # комиссия биржи (0.06%)

# --- Фильтры сигналов (сбалансированы для 10+ сигналов) ---
MIN_ADX = 15  # снижено с 18 до 15 для большего количества
MAX_SPREAD_PCT = 0.015  # увеличено с 0.012 до 0.015
VOLUME_SPIKE_MULT = 0.5  # снижено с 0.6 до 0.5
MACD_SIGNAL_WINDOW = 7  # ускорено

# --- Дополнительные фильтры для 15м ---
MIN_15M_CANDLES = 6  # снижено с 8 до 6
MIN_MOMENTUM = 0.02  # возвращено к 0.02
MAX_BB_WIDTH = 0.18  # увеличено обратно до 0.18

# --- Дополнительные индикаторы ---
USE_VOLUME_FILTER = True  
USE_VOLATILITY_FILTER = True

# --- Новые настройки 2025 для оптимального баланса ---
# Стохастический RSI (более чувствительный)
STOCH_RSI_K = 3     
STOCH_RSI_D = 3     
STOCH_RSI_LENGTH = 9   # снижено с 14 до 9
STOCH_RSI_SMOOTH = 3   

# Дивергенции 
USE_DIVERGENCE_DETECTION = True
DIVERGENCE_LOOKBACK = 15  # снижено с 20 до 15

# Мультитаймфреймовый анализ
USE_MULTI_TIMEFRAME = True
MTF_CONFLUENCE_WEIGHT = 0.3  # вес подтверждения старшего ТФ

# --- Продвинутая система скоринга (новое в 2025) ---
# Весовые коэффициенты для разных индикаторов
WEIGHT_RSI = 1.0
WEIGHT_MACD = 1.2      # MACD важнее на 15м
WEIGHT_BB = 1.1        # BB очень важны для 15м
WEIGHT_VWAP = 1.3      # VWAP критически важен
WEIGHT_VOLUME = 0.8    
WEIGHT_ADX = 0.9

# Минимальный композитный скор для сигнала
MIN_COMPOSITE_SCORE = 2.5  # существенно снижено для достижения 10+ сигналов в день

# --- Адаптивные настройки по времени ---
# Более агрессивные настройки в активные часы
ACTIVE_HOURS_UTC = [8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21]  # европа + америка
ACTIVE_HOURS_MULTIPLIER = 0.9  # снижение порогов на 10% в активные часы

# --- Система адаптации к волатильности ---
VOLATILITY_LOOKBACK = 48  # смотрим последние 48 свечей (12 часов)
HIGH_VOLATILITY_THRESHOLD = 0.03  # 3% средняя волатильность
LOW_VOLATILITY_THRESHOLD = 0.01   # 1% средняя волатильность

# При высокой волатильности - более строгие фильтры
HIGH_VOL_ADX_MIN = 20
HIGH_VOL_RSI_EXTREME = 5  # более экстремальные уровни

# При низкой волатильности - более мягкие фильтры  
LOW_VOL_ADX_MIN = 12
LOW_VOL_RSI_RANGE = 8     # более широкий диапазон 